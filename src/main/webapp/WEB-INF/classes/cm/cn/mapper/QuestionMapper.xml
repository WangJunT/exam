<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cm.cn.mapper.QuestionMapper" >
	 <resultMap id="BaseResultMap" type="cm.cn.po.JsQuesion" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 07 15:23:31 CST 2017.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="type_id" property="typeId" jdbcType="INTEGER" />
    <result column="title" property="title" jdbcType="VARCHAR" />
    <result column="answer" property="answer" jdbcType="VARCHAR" />
    <result column="creater" property="creater" jdbcType="VARCHAR" />
    <result column="leibie_type" property="leibieType" jdbcType="VARCHAR" />
    <result column="exam_type" property="examType" jdbcType="VARCHAR" />
    <result column="option_number" property="optionNumber" jdbcType="INTEGER" />
    <result column="difficult_type" property="difficultType" jdbcType="INTEGER" />
    <result column="know_type" property="knowType" jdbcType="VARCHAR" />
    <result column="an_A" property="anA" jdbcType="VARCHAR" />
    <result column="an_B" property="anB" jdbcType="VARCHAR" />
    <result column="an_C" property="anC" jdbcType="VARCHAR" />
    <result column="an_D" property="anD" jdbcType="VARCHAR" />
    <result column="reserve_one" property="reserveOne" jdbcType="VARCHAR" />
    <result column="reserve_two" property="reserveTwo" jdbcType="VARCHAR" />
    <result column="reserve_three" property="reserveThree" jdbcType="VARCHAR" />
    <result column="reserve_four" property="reserveFour" jdbcType="VARCHAR" />
    <result column="reserve_five" property="reserveFive" jdbcType="VARCHAR" />
    <result column="reserve_six" property="reserveSix" jdbcType="VARCHAR" />
  </resultMap>
	<insert id="insertList" parameterType="java.util.List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 20:12:20 CST 2017.
    -->
    insert into js_quesion(
        type_id,
        title,
        an_A,
		an_B,
		an_C,
		an_D,
        answer,
	<!--         creater, -->
	<!--         leibie_type, -->
	    exam_type,
	    difficult_type
	<!--         difficult_type, -->
	<!--         know_type, -->
	<!--         reserve_one, -->
	<!--         reserve_two, -->
	    )
       values
   
	<!--     <trim prefix="values (" suffix=")" suffixOverrides="," > -->
    <foreach collection="list" item="item" index="index" separator="," >
    (
	<!--         #{item.id,jdbcType=INTEGER}, -->
        #{item.typeId,jdbcType=INTEGER},
        #{item.title,jdbcType=VARCHAR},
        #{item.anA,jdbcType=VARCHAR},
        #{item.anB,jdbcType=VARCHAR},
        #{item.anC,jdbcType=VARCHAR},
        #{item.anD,jdbcType=VARCHAR},
        #{item.answer,jdbcType=VARCHAR},
	<!--         #{item.creater,jdbcType=VARCHAR}, -->
	<!--         #{item.leibieType,jdbcType=VARCHAR}, -->
	    #{item.examType,jdbcType=VARCHAR},
        #{item.difficultType,jdbcType=INTEGER}
	<!--         #{item.difficultType,jdbcType=INTEGER}, -->
	<!--         #{item.knowType,jdbcType=VARCHAR}, -->
	<!--         #{item.reserveOne,jdbcType=VARCHAR}, -->
	<!--         #{item.reserveTwo,jdbcType=VARCHAR}, -->
	)
     </foreach>  
  </insert>
  <!--   查询所有 -->
  <select id="selectAllQuestion" resultMap="BaseResultMap">
  	SELECT
		js.id 'id',
		js.type_id 'typeId',
		js.title 'title',
		js.an_A,
		js.an_B,
		js.an_C,
		js.an_D,
		js.answer 'answer'
	FROM
		js_quesion js
  </select>
  <!--   分类别查询所有题目 -->
  <select id="selectTypeQuestion" parameterType="int" resultMap="BaseResultMap">
  	SELECT
  		js.id 'id',
		js.title 'title',
		js.an_A,
		js.an_B,
		js.an_C,
		js.an_D,
		js.answer 'answer'
	FROM
		js_quesion js
	WHERE
		js.type_id = #{type_id}
  </select>
  <!--   分类随机查询 ,不用这方法-->
  <select id="selectRandomQuestion" resultMap="BaseResultMap">
  	SELECT
  		a.id 'id',
		a.title,
		a.answer,
		a.an_A ,
		a.an_B,
		a.an_C,
		a.an_D
	FROM
		(
			SELECT
				*
			FROM
				js_quesion ques
			WHERE
				ques.type_id = #{0}
		) a limit #{1},#{2}
  </select>
   <!--   根据题目类别查询各种类别题目总数,不用这个 -->
  <select id="selectCount" parameterType="int" resultType="int">
  	SELECT
		COUNT(*)
	FROM
		js_quesion ques
	WHERE
		ques.type_id = #{type_id}
  </select>
	<!--   根据 id 查询答案 -->
  <select id="selectAnswer" resultType="string">
  	SELECT
		js.answer 'answer'
	FROM
		js_quesion js
	WHERE
		id IN  
	<foreach collection="array" item="id" index="index"
           open="(" close=")" separator=",">
           #{id}
     </foreach>
  </select>
  	<!--   根据 id 查询题目 -->
  <select id="selectJsQuestion" resultMap="BaseResultMap">
  	SELECT
		js.id 'id',
		js.title 'title',
		js.type_id 'typeId',
		js.an_A,
		js.an_B,
		js.an_C,
		js.an_D,
		js.answer 'answer'
	FROM
		js_quesion js
	WHERE
		id IN  
	<foreach collection="array" item="id" index="index"
           open="(" close=")" separator=",">
           #{id}
     </foreach>
  </select>
  <!-- 分页查询 -->
  <select id="selectJsQuestionlimit" resultMap="BaseResultMap" parameterType="cm.cn.po.PageQuestion">
  	SELECT
		js.id 'id',
		js.type_id 'typeId',
		js.title 'title',
		js.an_A,
		js.an_B,
		js.an_C,
		js.an_D,
		js.answer 'answer'
	FROM
		js_quesion js
	<where> 
	    <if test="typeId != null">
	         type_id = #{typeId}
	    </if> 
	    <if test="leibieType != null">
	        AND leibie_type = #{leibieType}
	    </if>
	    <if test="exam_type != null ">
	        AND exam_type = #{exam_type}
	    </if>
	    <if test="difficult_type != null ">
	        AND difficult_type = #{difficult_type}
	    </if>
	    <if test="know_type != null ">
	        AND know_type = #{know_type}
	    </if>
  </where>
	limit #{start},#{size}
  </select>
  <select id="selectRan" resultMap="BaseResultMap" parameterType="cm.cn.po.RandomQuestion">
  	SELECT
		js.id 'id',
		js.type_id 'typeId',
		js.title 'title',
		js.an_A,
		js.an_B,
		js.an_C,
		js.an_D,
		js.answer 'answer'
	FROM
		js_quesion js
	<where> 
	    <if test="typeId != null">
	         type_id = #{typeId}
	    </if> 
	    <if test="leibieType != null">
	        AND leibie_type = #{leibieType}
	    </if>
	    <if test="exam_type != null ">
	        AND exam_type = #{exam_type}
	    </if>
	    <if test="difficult_type != null ">
	        AND difficult_type = #{difficult_type}
	    </if>
	    <if test="know_type != null ">
	        AND know_type = #{know_type}
	    </if>
  </where>
		ORDER BY RAND()  limit #{total}
  </select>
</mapper>